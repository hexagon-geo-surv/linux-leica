// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright (C) 2021 Leica Geosystems AG
 */

#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/interrupt-controller/irq.h>

/dts-v1/;
/plugin/;

&i2c4 {
	clock-frequency = <384000>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c4>;
	status = "okay";

	iis2mdc@1e {
		compatible = "st,iis2mdc";
		reg = <0x1e>;
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_iis2mdc>;
		interrupt-parent = <&gpio5>;
		interrupts = <2 IRQ_TYPE_EDGE_RISING>;
		st,drdy-int-pin = <1>;
	};
};

&ecspi3 {
	fsl,spi-num-chipselects = <6>;
	cs-gpios =
		   <&gpio5 25 GPIO_ACTIVE_LOW>,
		   <&gpio5 1 GPIO_ACTIVE_LOW>,
		   <&gpio4 25 GPIO_ACTIVE_LOW>,
		   <&gpio4 26 GPIO_ACTIVE_LOW>,
		   <&gpio5 4 GPIO_ACTIVE_LOW>,
		   <&gpio5 3 GPIO_ACTIVE_LOW>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ecspi3>;
	status = "okay";

	imu1_accel:bmg088@0 {
		compatible = "bosch,bmi088-accel";
		spi-max-frequency = <10000000>;
		reg = <0>;
	};

	imu1_gyro:bmg088@1 {
		compatible = "bosch,bmi088_gyro";
		spi-max-frequency = <10000000>;
		reg = <1>;
	};

	imu2_accel:bmg088@2 {
		compatible = "bosch,bmi088-accel";
		spi-max-frequency = <10000000>;
		reg = <2>;
	};

	imu2_gyro:bmg088@3 {
		compatible = "bosch,bmi088_gyro";
		spi-max-frequency = <10000000>;
		reg = <3>;
	};

	imu3_accel:bmg088@4 {
		compatible = "bosch,bmi088-accel";
		spi-max-frequency = <10000000>;
		reg = <4>;
	};

	imu3_gyro:bmg088@5 {
		compatible = "bosch,bmi088_gyro";
		spi-max-frequency = <10000000>;
		reg = <5>;
	};
};

&gpio4 {
	status = "okay";
	gpio-line-names =
		"DBG_ENET_WOL",
		"DBG_ENET_INT",
		"", "", "", "", "",
		"", "", "", "",
		"DBG_GPIO1",
		"", "", "", "", "",
		"", "", "", "", "",
		"", "", "", "", "",
		"GNSS_PPS",
		"IMU_3_INT";
};

&gpio5 {
	status = "okay";
	gpio-line-names =
		"", "",
		"MAG_DRDY",
		"", "",
		"IMU_LT_OUT",
		"", "", "", "", "",
		"", "", "", "", "",
		"", "",
		"IMU_1_INT",
		"IMU_2_INT";
};

&iomuxc {
	pinctrl-0 = <&pinctrl_gpio>, <&pinctrl_gpio_m4>;

	pinctrl_i2c4: i2c4grp {
		fsl,pins = <
			MX8MM_IOMUXC_I2C4_SCL_I2C4_SCL	0x400001c3	/*CROCODILE_IMX8_I2C_4_SCL*/
			MX8MM_IOMUXC_I2C4_SDA_I2C4_SDA	0x400001c3	/*CROCODILE_IMX8_I2C_4_SDA*/
		>;
	};

	pinctrl_iis2mdc: iis2mdcgrp {
		fsl,pins = <
			MX8MM_IOMUXC_SAI3_MCLK_GPIO5_IO2		0x40	/*CROCODILE_MAG_DRDY*/
		>;
	};

	pinctrl_ecspi3: ecspi3grp {
		fsl,pins = <
			MX8MM_IOMUXC_UART1_TXD_ECSPI3_MOSI	0x0	/*CROCODILE_IMX8_ECSPI3_MOSI*/
			MX8MM_IOMUXC_UART2_RXD_ECSPI3_MISO	0x0	/*CROCODILE_IMX8_ECSPI3_MISO*/
			MX8MM_IOMUXC_UART1_RXD_ECSPI3_SCLK	0x0	/*CROCODILE_IMX8_ECSPI3_SCLK*/
			MX8MM_IOMUXC_UART2_TXD_GPIO5_IO25		0x0	/*CROCODILE_IMU_1_CS_ACC*/
			MX8MM_IOMUXC_SAI3_TXD_GPIO5_IO1		0x0	/*CROCODILE_IMU_1_CS_GYRO*/
			MX8MM_IOMUXC_SAI2_TXC_GPIO4_IO25		0x0	/*CROCODILE_IMU_2_CS_ACC*/
			MX8MM_IOMUXC_SAI2_TXD0_GPIO4_IO26		0x0	/*CROCODILE_IMU_2_CS_GYRO*/
			MX8MM_IOMUXC_SPDIF_RX_GPIO5_IO4		0x0	/*CROCODILE_IMU_3_CS_ACC*/
			MX8MM_IOMUXC_SPDIF_TX_GPIO5_IO3		0x0	/*CROCODILE_IMU_3_CS_GYRO*/
		>;
	};

	pinctrl_gpio_m4: gpio_m4grp {
		fsl,pins = <
			MX8MM_IOMUXC_SPDIF_EXT_CLK_GPIO5_IO5		0x00	/*CROCODILE_IMU_LT_OUT*/
			MX8MM_IOMUXC_I2C3_SCL_GPIO5_IO18		0x140	/*CROCODILE_IMU_1_INT*/
			MX8MM_IOMUXC_I2C3_SDA_GPIO5_IO19		0x140	/*CROCODILE_IMU_2_INT*/
			MX8MM_IOMUXC_SAI3_RXFS_GPIO4_IO28		0x140	/*CROCODILE_IMU_3_INT*/
			MX8MM_IOMUXC_SAI2_MCLK_GPIO4_IO27		0x100	/*CROCODILE_GNSS_PPS*/
			MX8MM_IOMUXC_SAI1_TXC_GPIO4_IO11		0x00	/*CROCODILE_DBG_GPIO1*/
			MX8MM_IOMUXC_SAI1_RXC_GPIO4_IO1		0x00	/*CROCODILE_DBG_ENET_INT*/
			MX8MM_IOMUXC_SAI1_RXFS_GPIO4_IO0		0x00	/*CROCODILE_DBG_ENET_WOL*/
		>;
	};
};
